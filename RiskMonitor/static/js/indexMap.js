
var data = [
    {
        name: "郴州",
        value: dateset["郴州"]
    },
    {
        name: "南充",
        value: dateset["南充"]
    },
    {
        name: "汕尾",
        value: dateset["汕尾"]
    },
    {
        name: "长治",
        value: dateset["长治"]
    },
    {
        name: "漳州",
        value: dateset["漳州"]
    },
    {
        name: "莆田",
        value: dateset["莆田"]
    },
    {
        name: "汕头",
        value: dateset["汕头"]
    },
    {
        name: "百色",
        value: dateset["百色"]
    },
    {
        name: "湛江",
        value: dateset["湛江"]
    },
    {
        name: "荆州",
        value: dateset["荆州"]
    },
    {
        name: "清远",
        value: dateset["清远"]
    },
    {
        name: "内江",
        value: dateset["内江"]
    },
    {
        name: "梅州",
        value: dateset["梅州"]
    },
    {
        name: "怀化",
        value: dateset["怀化"]
    },
    {
        name: "绵阳",
        value: dateset["绵阳"]
    },
    {
        name: "潮州",
        value: dateset["潮州"]
    },
    {
        name: "常德",
        value: dateset["常德"]
    },
    {
        name: "云浮",
        value: dateset["云浮"]
    },
    {
        name: "龙岩",
        value: dateset["龙岩"]
    },
    {
        name: "重庆",
        value: dateset["重庆"]
    },
    {
        name: "黄冈",
        value: dateset["黄冈"]
    },
    {
        name: "揭阳",
        value: dateset["揭阳"]
    },
    {
        name: "钦州",
        value: dateset["钦州"]
    },
    {
        name: "福州",
        value: dateset["福州"]
    },
    {
        name: "泸州",
        value: dateset["泸州"]
    },
    {
        name: "赣州",
        value: dateset["赣州"]
    },
    {
        name: "广安",
        value: dateset["广安"]
    },
    {
        name: "茂名",
        value: dateset["茂名"]
    },
    {
        name: "韶关",
        value: dateset["韶关"]
    },
    {
        name: "河池",
        value: dateset["河池"]
    },
    {
        name: "盐城",
        value: dateset["盐城"]
    },
    {
        name: "毕节",
        value: dateset["毕节"]
    },
    {
        name: "海南省",
        value: dateset["海南省"]
    },
    {
        name: "淮安",
        value: dateset["淮安"]
    },
    {
        name: "河源",
        value: dateset["河源"]
    },
    {
        name: "遂宁",
        value: dateset["遂宁"]
    },
    {
        name: "南宁",
        value: dateset["南宁"]
    },
    {
        name: "泉州",
        value: dateset["泉州"]
    },
    {
        name: "邯郸",
        value: dateset["邯郸"]
    },
    {
        name: "恩施土家族苗族自治州",
        value: dateset["恩施土家族苗族自治州"]
    },
    {
        name: "玉林",
        value: dateset["玉林"]
    },
    {
        name: "保定",
        value: dateset["保定"]
    },
    {
        name: "肇庆",
        value: dateset["肇庆"]
    },
    {
        name: "衡阳",
        value: dateset["衡阳"]
    },
    {
        name: "桂林",
        value: dateset["桂林"]
    },
    {
        name: "德阳",
        value: dateset["德阳"]
    },
    {
        name: "江门",
        value: dateset["江门"]
    },
    {
        name: "武汉",
        value: dateset["武汉"]
    },
    {
        name: "周口",
        value: dateset["周口"]
    },
    {
        name: "成都",
        value: dateset["成都"]
    },
    {
        name: "南通",
        value: dateset["南通"]
    },
    {
        name: "安庆",
        value: dateset["安庆"]
    },
    {
        name: "广州",
        value: dateset["广州"]
    },
    {
        name: "柳州",
        value: dateset["柳州"]
    },
    {
        name: "阜阳",
        value: dateset["阜阳"]
    },
    {
        name: "温州",
        value: dateset["温州"]
    },
    {
        name: "岳阳",
        value: dateset["岳阳"]
    },
    {
        name: "梧州",
        value: dateset["梧州"]
    },
    {
        name: "上饶",
        value: dateset["上饶"]
    },
    {
        name: "达川",
        value: dateset["达川"]
    },
    {
        name: "徐州",
        value: dateset["徐州"]
    },
    {
        name: "渭南",
        value: dateset["渭南"]
    },
    {
        name: "邵阳",
        value: dateset["邵阳"]
    },
    {
        name: "宜宾",
        value: dateset["宜宾"]
    },
    {
        name: "贵港",
        value: dateset["贵港"]
    },
    {
        name: "巴中",
        value: dateset["巴中"]
    },
    {
        name: "永州",
        value: dateset["永州"]
    },
    {
        name: "宁德",
        value: dateset["宁德"]
    },
    {
        name: "遵义",
        value: dateset["遵义"]
    },
    {
        name: "辖区",
        value: dateset["辖区"]
    },
    {
        name: "惠州",
        value: dateset["惠州"]
    },
    {
        name: "湖北省",
        value: dateset["湖北省"]
    }
];

var geoCoordMap = {
    "郴州": [
        113.014717,
        25.770509
    ],
    "南充": [
        106.110698,
        30.837793
    ],
    "汕尾": [
        115.375158,
        22.786186
    ],
    "长治": [
        113.116404,
        36.195409
    ],
    "漳州": [
        117.647093,
        24.513025
    ],
    "淮安": [
        119.113185,
        33.551052
    ],
    "汕头": [
        116.681972,
        23.354091
    ],
    "百色": [
        106.618283,
        23.902479
    ],
    "湛江": [
        110.359368,
        21.270702
    ],
    "荆州": [
        112.239631,
        30.335237
    ],
    "清远": [
        113.056042,
        23.681774
    ],
    "内江": [
        105.058433,
        29.580228
    ],
    "梅州": [
        116.122523,
        24.288578
    ],
    "怀化": [
        110.001922,
        27.569517
    ],
    "钦州": [
        108.654146,
        21.979933
    ],
    "潮州": [
        116.622756,
        23.656703
    ],
    "常德": [
        111.698784,
        29.031654
    ],
    "云浮": [
        112.044491,
        22.915094
    ],
    "莆田": [
        119.007777,
        25.454084
    ],
    "重庆": [
        106.912251,
        29.4315861
    ],
    "南宁": [
        108.366543,
        22.817002
    ],
    "遵义": [
        106.927389,
        27.725654
    ],
    "绵阳": [
        104.679004,
        31.46746
    ],
    "南通": [
        120.894291,
        31.980171
    ],
    "福州": [
        119.296482,
        26.074478
    ],
    "巴中": [
        106.747477,
        31.867903
    ],
    "泸州": [
        105.44174,
        28.871569
    ],
    "赣州": [
        114.933546,
        25.830694
    ],
    "揭阳": [
        116.372708,
        23.549701
    ],
    "茂名": [
        110.925439,
        21.662991
    ],
    "河池": [
        108.085261,
        24.692931
    ],
    "盐城": [
        120.16366,
        33.347316
    ],
    "毕节": [
        105.291643,
        27.283955
    ],
    "龙岩": [
        117.017536,
        25.075123
    ],
    "广安": [
        106.633088,
        30.456224
    ],
    "黄冈": [
        114.872199,
        30.453667
    ],
    "泉州": [
        118.675675,
        24.874132
    ],
    "遂宁": [
        105.592898,
        30.532847
    ],
    "河源": [
        114.700961,
        23.743685
    ],
    "恩施土家族苗族自治州": [
        109.488172,
        30.272156
    ],
    "玉林": [
        110.18122,
        22.654032
    ],
    "保定": [
        115.464589,
        38.874434
    ],
    "肇庆": [
        112.465091,
        23.047191
    ],
    "衡阳": [
        112.572018,
        26.893368
    ],
    "桂林": [
        110.179953,
        25.234479
    ],
    "海南省": [
        109.949686,
        19.5663947
    ],
    "江门": [
        113.081508,
        22.579117
    ],
    "武汉": [
        114.305539,
        30.592849
    ],
    "周口": [
        114.69695,
        33.626149
    ],
    "成都": [
        104.066801,
        30.572815
    ],
    "邯郸": [
        114.538961,
        36.625656
    ],
    "安庆": [
        117.115101,
        30.531919
    ],
    "广州": [
        113.264385,
        23.12911
    ],
    "柳州": [
        109.428608,
        24.326292
    ],
    "阜阳": [
        115.814504,
        32.890479
    ],
    "温州": [
        120.699361,
        27.993828
    ],
    "岳阳": [
        113.12873,
        29.356803
    ],
    "梧州": [
        111.279115,
        23.476962
    ],
    "上饶": [
        117.943433,
        28.454862
    ],
    "达川": [
        107.511843,
        31.196079
    ],
    "徐州": [
        117.284124,
        34.205768
    ],
    "渭南": [
        109.502882,
        34.49938
    ],
    "邵阳": [
        111.467674,
        27.23895
    ],
    "宜宾": [
        104.643159,
        28.751836
    ],
    "贵港": [
        109.598926,
        23.11153
    ],
    "韶关": [
        113.59762,
        24.810879
    ],
    "永州": [
        111.613445,
        26.420394
    ],
    "宁德": [
        119.547932,
        26.665617
    ],
    "德阳": [
        104.397894,
        31.126855
    ],
    "辖区": [
        70.2408325,
        39.0857902
    ],
    "惠州": [
        114.415801,
        23.112257
    ],
    "湖北省": [
        112.2384017,
        30.7378118
    ]
};

var convertData = function(data) {
    var res = [];
    for (var i = 0; i < data.length; i++) {
        var geoCoord = geoCoordMap[data[i].name];
        if (geoCoord) {
            res.push({
                name: data[i].name,
                value: geoCoord.concat(data[i].value)
            });
        }
    }
    return res;
};

var convertedData = [
    convertData(data),
    convertData(data.sort(function(a, b) {
        return b.value - a.value;
    }).slice(0, 6))
];
data.sort(function(a, b) {
    return a.value - b.value;
})

var selectedItems = [];
var categoryData = [];
var barData = [];
//   var maxBar = 30;
var sum = 0;
var count = data.length;
for (var i = 0; i < data.length; i++) {
    categoryData.push(data[i].name);
    barData.push(data[i].value);
    sum += data[i].value;
}

var option = {
    backgroundColor: '#013769',
    animation: true,
    animationDuration: 1000,
    animationEasing: 'cubicInOut',
    animationDurationUpdate: 1000,
    animationEasingUpdate: 'cubicInOut',
    title: [{
        text: '全国36城“无人区”数',
        link: 'http://pages.anjuke.com/expert/newexpert.html',
        subtext: 'data from Anjuke',
        sublink: 'http://pages.anjuke.com/expert/newexpert.html',
        left: 'center',
        textStyle: {
            color: '#fff'
        }
    }],
    toolbox: {
        iconStyle: {
            normal: {
                borderColor: '#fff'
            },
            emphasis: {
                borderColor: '#b1e4ff'
            }
        },
        feature: {
            dataZoom: {},
            brush: {
                type: ['rect', 'polygon', 'clear']
            },
            saveAsImage: {
                show: true
            }
        }
    },
    brush: {
        outOfBrush: {
            color: '#abc'
        },
        brushStyle: {
            borderWidth: 2,
            color: 'rgba(0,0,0,0.2)',
            borderColor: 'rgba(0,0,0,0.5)',
        },
        seriesIndex: [0, 1],
        throttleType: 'debounce',
        throttleDelay: 300,
        geoIndex: 0
    },
    geo: {
        map: 'china',
        left: '10',
        right: '35%',
        center: [93, 36.2],
        zoom: 1.5,
        label: {
            emphasis: {
                show: false
            }
        },
        roam: true,
        itemStyle: {
            normal: {
                shadowBlur: 20,
                shadowColor: 'rgba(0, 0, 0,0.8)',
                areaColor: '#004571',
                borderColor: '#6AC6E6'
            },
            emphasis: {
                areaColor: '#00385E'
            }
        }
    },
    tooltip: {
        trigger: 'item'
    },
    grid: {
        right: 40,
        top: 100,
        bottom: 40,
        width: '30%'
    },

    series: [{
        // name: 'pm2.5',
        type: 'scatter',
        coordinateSystem: 'geo',
        data: convertedData[0],
        symbolSize: function(val) {
            return Math.max(val[2] / 300, 8);
        },
        label: {
            normal: {
                formatter: '{b}',
                position: 'right',
                show: false
            },
            emphasis: {
                show: false
            }
        },
        itemStyle: {
            normal: {
                color: '#FF8C00',
                position: 'right',
                show: true
            }
        }
    }, {
        //  name: 'Top 5',
        type: 'effectScatter',
        coordinateSystem: 'geo',
        data: convertedData[0],
        symbolSize: function(val) {
            return Math.max(val[2] / 500, 8);
        },
        showEffectOn: 'render',
        rippleEffect: {
            brushType: 'stroke'
        },
        hoverAnimation: true,
        label: {
            normal: {
                formatter: '{b}',
                position: 'right',
                show: true
            }
        },
        itemStyle: {
            normal: {
                color: '#f4e925',
                shadowBlur: 50,
                shadowColor: '#EE0000'
            }
        },
        zlevel: 1
    }]
};

var myChart= echarts.init(document.getElementById('map'));
myChart.setOption(option);                  